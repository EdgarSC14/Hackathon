<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impulso Web3</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
</head>
<body class="text-white has-morpho-nav" style="background-color: #0a0a0a;">
    <!-- Canvas para part√≠culas interactivas estilo Morpho -->
    <canvas id="morpho-canvas" class="fixed w-full h-full" style="z-index: 0;"></canvas>
    
    <nav class="morpho-nav">
        <div class="nav-container">
            <div class="flex items-center">
                <a href="#" class="nav-brand flex items-center gap-2">
                    <svg class="w-8 h-8" viewBox="0 0 256 256" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <!-- Gradiente radial para fondo del logo -->
                        <defs>
                            <radialGradient id="navLogoGradient" cx="50%" cy="50%">
                                <stop offset="0%" stop-color="rgba(139, 92, 246, 0.8)"/>
                                <stop offset="100%" stop-color="rgba(139, 92, 246, 0)"/>
                            </radialGradient>
                        </defs>
                        <!-- C√≠rculo principal con gradiente -->
                        <circle cx="128" cy="128" r="102" fill="url(#navLogoGradient)"/>
                        <!-- Borde exterior blanco -->
                        <circle cx="128" cy="128" r="102" stroke="rgba(255, 255, 255, 0.9)" stroke-width="4" fill="none"/>
                        <!-- Forma interna: diamante abstracto -->
                        <path d="M 128 51 L 165 128 L 128 205 L 91 128 Z" fill="rgba(255, 255, 255, 0.95)"/>
                        <!-- Punto brillante en el centro -->
                        <circle cx="128" cy="128" r="38" fill="rgba(139, 92, 246, 0.7)"/>
                        <!-- N√∫cleo brillante -->
                        <circle cx="128" cy="128" r="20" fill="rgba(255, 255, 255, 1)"/>
                        <!-- L√≠neas decorativas sutiles -->
                        <line x1="128" y1="76" x2="128" y2="42" stroke="rgba(139, 92, 246, 0.4)" stroke-width="2"/>
                        <line x1="180" y1="128" x2="214" y2="128" stroke="rgba(139, 92, 246, 0.4)" stroke-width="2"/>
                        <line x1="128" y1="180" x2="128" y2="214" stroke="rgba(139, 92, 246, 0.4)" stroke-width="2"/>
                        <line x1="76" y1="128" x2="42" y2="128" stroke="rgba(139, 92, 246, 0.4)" stroke-width="2"/>
                    </svg>
                    <span class="nav-brand-text">Impulso Web3</span>
                </a>
            </div>
            <div class="nav-links hidden md:flex">
                <button class="morpho-rounded-button morpho-nav-button" data-nav="home">Inicio</button>
                <button class="morpho-rounded-button morpho-nav-button" data-nav="creadores-section">Creadores</button>
                <button class="morpho-rounded-button morpho-nav-button" data-nav="apoyar">Apoyar Comunidad</button>
                <button id="lunaNavBtn" class="morpho-rounded-button morpho-nav-button morpho-luna-btn">
                    <i class="fas fa-sparkles mr-2"></i>
                    <span>Luna AI</span>
                </button>
            </div>
            <div class="nav-actions">
                <div class="hidden md:block morpho-select-wrapper">
                    <select id="networkSelector" class="morpho-select" style="display: none;">
                        <option value="arbitrumSepolia">Arbitrum Sepolia</option>
                        <option value="arbitrumOne">Arbitrum One</option>
                    </select>
                    <div class="morpho-custom-select">
                        <div class="morpho-custom-select-trigger">
                            <span class="morpho-select-value">Arbitrum Sepolia</span>
                            <svg class="morpho-select-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                                <path d="M1 1L6 6L11 1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="morpho-custom-select-options">
                            <div class="morpho-custom-option" data-value="arbitrumSepolia">
                                <span class="option-text">Arbitrum Sepolia</span>
                                <span class="option-badge">Testnet</span>
                            </div>
                            <div class="morpho-custom-option" data-value="arbitrumOne">
                                <span class="option-text">Arbitrum One</span>
                                <span class="option-badge">Mainnet</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="balanceContainer" class="morpho-balance hidden">
                    <span>Saldo: </span>
                    <span id="balance">0</span>
                </div>
                <div class="relative">
                    <button id="connectWallet" class="morpho-rounded-button morpho-button-grey morpho-primary morpho-button-parent">
                        <span id="walletText">Conectar Wallet</span>
                    </button>
                    <div id="walletDropdown" class="morpho-dropdown hidden absolute right-0 mt-2 w-72 rounded-lg shadow-xl z-50">
                        <div class="p-4">
                            <!-- Informaci√≥n de la Wallet -->
                            <div class="flex items-center space-x-3 mb-4 pb-4 border-b border-gray-700">
                                <div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center">
                                    <i class="fas fa-wallet text-white text-sm"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="text-sm font-semibold text-white truncate" id="walletAddress">0x0000...0000</div>
                                    <div class="text-xs text-gray-400 truncate" id="walletNetwork">Arbitrum Sepolia</div>
                                </div>
                            </div>

                            <!-- Estad√≠sticas -->
                            <div class="mb-4 space-y-2">
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-400">Saldo:</span>
                                    <span id="dropdownBalance" class="text-white font-semibold">0 ETH</span>
                                </div>
                            </div>

                            <!-- Acciones de Wallet -->
                            <div class="border-t border-gray-700 pt-3 space-y-2">
                                <button id="changeAccountBtn" class="w-full flex items-center justify-between px-3 py-2 text-sm rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors text-white">
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-exchange-alt"></i>
                                        <span>Cambiar Cuenta</span>
                                    </div>
                                    <i class="fas fa-chevron-right text-xs"></i>
                                </button>
                            </div>

                            <!-- Desconectar -->
                            <div class="border-t border-gray-700 pt-3 mt-3">
                                <button id="disconnectWallet" class="w-full flex items-center justify-center px-3 py-2 text-sm rounded-lg bg-gradient-to-r from-red-600/20 to-red-500/20 hover:from-red-600/30 hover:to-red-500/30 border border-red-500/40 hover:border-red-400/50 transition-all text-red-300 hover:text-red-200 group">
                                    <i class="fas fa-sign-out-alt mr-2 group-hover:rotate-90 transition-transform duration-300"></i>
                                    <span>Desconectar Wallet</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main class="container-morpho py-8 relative z-10">
        <!-- Navegaci√≥n m√≥vil -->
        <div class="nav-mobile-morpho">
            <button data-nav="home">Inicio</button>
            <button data-nav="creadores-section">Creadores</button>
            <button data-nav="apoyar">Apoyar</button>
        </div>
        
        <!-- Hero Section con T√≠tulo y Descripci√≥n -->
        <section class="hero-title-section">
            <div class="hero-content">
                <h1 class="hero-title">Impulso Web3</h1>
                <p class="hero-description">
                    Comunidad descentralizada que empodera a creadores y artistas mediante blockchain. 
                    Utilizando smart contracts en Arbitrum Stylus, conectamos talento con donadores 
                    en un ecosistema transparente de apoyos, incentivos y colaboraci√≥n creativa.
                </p>
            </div>
        </section>
        
        <!-- Hero Section con C√≠rculo Animado -->
        <section class="hero-circle-section">
            <div class="circle-container">
                <!-- El logo se dibujar√° en el canvas, pero necesitamos un elemento HTML para referencia -->
                <div id="circle-logo" class="circle-logo">
                    <div class="logo-text">Impulso<br>Web3</div>
                </div>
            </div>
            <div class="scroll-indicator">
                <i class="fas fa-chevron-down"></i>
            </div>
        </section>
        
        <!-- Secci√≥n Inicio -->
        <section id="section-home" class="section-morpho">
            <!-- Banner con resumen del proyecto -->
            <div class="morpho-card mb-8 scroll-reveal-enhanced">
                <h2 class="section-morpho-title text-gradient-morpho mb-4">Bienvenido a la Comunidad Creativa</h2>
                <p class="section-morpho-subtitle text-lg">
                    Plataforma transparente que conecta artistas con su audiencia. Los donadores apoyan el arte que aman 
                    y reciben recompensas, mientras los artistas reciben el apoyo que merecen.
                </p>
            </div>

            <!-- Datos globales del sistema -->
            <div class="grid-morpho grid-morpho-3 mb-8">
                <div class="stats-card-morpho scroll-reveal-enhanced">
                    <div class="text-4xl mb-2">üí∞</div>
                    <div class="stats-number" id="globalSystemBalance">24.67 ETH</div>
                    <div class="stats-label">Saldo del Sistema</div>
                    <div class="text-sm text-green-400 mt-2">
                        <i class="fas fa-arrow-up"></i> +12.5% este mes
                    </div>
                </div>
                <div class="stats-card-morpho scroll-reveal-enhanced">
                    <div class="text-4xl mb-2">üéÅ</div>
                    <div class="stats-number" id="globalIncentiveFund">8.34 ETH</div>
                    <div class="stats-label">Fondo de Incentivos</div>
                    <div class="text-sm text-blue-400 mt-2">
                        <i class="fas fa-trophy"></i> 158 beneficiarios
                    </div>
                </div>
                <div class="stats-card-morpho scroll-reveal-enhanced">
                    <div class="text-4xl mb-2">‚ù§Ô∏è</div>
                    <div class="stats-number" id="globalTotalDonations">185.42 ETH</div>
                    <div class="stats-label">Total Donaciones</div>
                    <div class="text-sm text-purple-400 mt-2">
                        <i class="fas fa-heart"></i> 1,247 donaciones
                    </div>
                </div>
            </div>

            <!-- Bot√≥n Conectar Wallet destacado -->
            <div class="flex justify-center mb-8">
                <button id="connectWalletHome" class="btn-morpho btn-morpho-accent">
                    <i class="fas fa-wallet mr-2"></i>
                    Conectarse con Wallet
                </button>
            </div>
        </section>

        <!-- Secci√≥n Finanzas & Retiros (Admin) -->
        <section id="section-finanzas" class="section-morpho hidden">
            <h2 class="section-morpho-title text-gradient-morpho mb-8">Finanzas & Retiros</h2>
            <p class="section-morpho-subtitle mb-6">Panel exclusivo para administradores</p>
            
            <!-- Balance del Sistema -->
            <div class="morpho-card mb-8">
                <h3 class="text-2xl font-light mb-6 flex items-center gap-3">
                    <span class="text-3xl">üíº</span> Balance del Sistema
                </h3>
                <div class="stats-card-morpho mb-4">
                    <div class="text-sm text-gray-400 mb-2">Saldo Total</div>
                    <div id="adminSystemBalance" class="stats-number text-3xl">0 ETH</div>
                </div>
                <button id="refreshAdminBalanceBtn" class="btn-morpho btn-morpho-primary">
                    <i class="fas fa-sync-alt mr-2"></i>Actualizar Balance
                </button>
            </div>

            <!-- Retiro Manual -->
            <div class="morpho-card mb-8">
                <h3 class="text-2xl font-light mb-6 flex items-center gap-3">
                    <span class="text-3xl">üîÑ</span> Retiro Manual
                </h3>
                <div class="grid-morpho grid-morpho-1 gap-4">
                    <input id="withdrawToAddress" type="text" class="input-morpho" placeholder="Direcci√≥n destino: 0x...">
                    <input id="withdrawAmountAdmin" type="number" step="0.0001" min="0.0001" class="input-morpho" placeholder="Monto a retirar (ETH)">
                    <button id="withdrawManuallyBtn" class="btn-morpho btn-morpho-accent">
                        <i class="fas fa-paper-plane mr-2"></i>Retirar Manualmente
                    </button>
                </div>
            </div>

            <!-- Configurar Retiros Autom√°ticos -->
            <div class="morpho-card mb-8">
                <h3 class="text-2xl font-light mb-6 flex items-center gap-3">
                    <span class="text-3xl">‚öôÔ∏è</span> Configurar Retiros Autom√°ticos
                </h3>
                <p class="text-gray-400 mb-4">Configura el sistema para retiros autom√°ticos cuando se alcancen ciertos l√≠mites</p>
                <div class="grid-morpho grid-morpho-1 gap-4">
                    <input id="autoTargetAddress" type="text" class="input-morpho" placeholder="Direcci√≥n objetivo: 0x...">
                    <input id="autoThreshold" type="number" step="0.1" min="0.1" class="input-morpho" placeholder="Umbral m√≠nimo (ETH)">
                    <input id="autoInterval" type="number" step="1" min="1" class="input-morpho" placeholder="Intervalo (d√≠as)">
                    <button id="setAutoWithdrawConfigBtn" class="btn-morpho btn-morpho-accent">
                        <i class="fas fa-save mr-2"></i>Guardar Configuraci√≥n
                    </button>
                </div>
            </div>

            <!-- Ejecutar Retiro Autom√°tico -->
            <div class="morpho-card">
                <h3 class="text-2xl font-light mb-6 flex items-center gap-3">
                    <span class="text-3xl">üöÄ</span> Ejecutar Retiro Autom√°tico
                </h3>
                <p class="text-gray-400 mb-4">Ejecuta manualmente el retiro autom√°tico basado en la configuraci√≥n actual</p>
                <button id="executeAutoWithdrawBtn" class="btn-morpho btn-morpho-accent">
                    <i class="fas fa-play-circle mr-2"></i>Ejecutar Retiro Autom√°tico
                </button>
            </div>
        </section>

        <!-- Secci√≥n Creadores -->
        <section id="section-creadores-section" class="section-morpho hidden">
            <h2 class="section-morpho-title text-gradient-morpho mb-8">Creadores</h2>
            
            <!-- Estado del Artista -->
            <div class="bg-gradient-to-r from-purple-600/20 to-blue-600/20 rounded-lg p-6 mb-8 border border-purple-500/30">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center">
                            <i class="fas fa-check text-white text-xl"></i>
                        </div>
                        <div>
                            <p class="text-white font-semibold text-lg">Artista Verificado</p>
                            <p class="text-gray-400 text-sm">Desde: 15 de Septiembre, 2024</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="text-purple-400 font-bold text-2xl">Mar√≠a Rodr√≠guez</p>
                        <div class="flex items-center gap-2 justify-end mt-1">
                            <span class="bg-green-500/20 text-green-400 px-3 py-1 rounded-full text-xs">
                                <i class="fas fa-crown mr-1"></i>Activo
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Registro de Artista -->
            <div class="morpho-card mb-8">
                <h3 class="text-2xl font-light mb-6 flex items-center gap-3">
                    <span class="text-3xl">ü™™</span> Informaci√≥n de Perfil
                </h3>
                <p class="text-gray-400 mb-4">Actualiza tu informaci√≥n como artista</p>
                <div class="grid-morpho grid-morpho-1 gap-4">
                    <input id="artistName" type="text" class="input-morpho" placeholder="Nombre art√≠stico" value="Mar√≠a Rodr√≠guez">
                    <button id="registerArtistBtn" class="btn-morpho btn-morpho-primary">
                        <i class="fas fa-save mr-2"></i>Actualizar Perfil
                    </button>
                </div>
            </div>

            <!-- Mis Canciones -->
            <div class="morpho-card mb-8">
                <h3 class="text-2xl font-light mb-6 flex items-center gap-3">
                    <span class="text-3xl">üéµ</span> Mis Canciones
                </h3>
                <div id="mySongsList" class="space-y-4">
                    <!-- Canci√≥n 1 -->
                    <div class="p-4 bg-gray-800/50 rounded-lg hover:bg-gray-800/70 transition-all">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <h4 class="text-lg font-semibold text-white mb-2">üéµ Luna de Fuego</h4>
                                <div class="space-y-2">
                                    <div class="flex items-center gap-2 text-sm">
                                        <span class="text-gray-400">IPFS:</span>
                                        <span class="text-purple-400 font-mono text-xs">QmX8vD3z2Y5...</span>
                                    </div>
                                    <div class="flex items-center gap-4">
                                        <div class="flex items-center gap-2">
                                            <i class="fas fa-coins text-green-400"></i>
                                            <span class="text-gray-400">Recaudado:</span>
                                            <span class="text-green-400 font-bold">2.45 ETH</span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <i class="fas fa-heart text-red-400"></i>
                                            <span class="text-gray-400">Donaciones:</span>
                                            <span class="text-blue-400 font-bold">47</span>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-2 text-xs text-gray-500 mt-2">
                                        <i class="fas fa-calendar"></i>
                                        <span>Subida hace 2 semanas</span>
                                    </div>
                                </div>
                            </div>
                            <button class="btn-morpho btn-morpho-ghost btn-sm" onclick="showSongDetails('1', 'Luna de Fuego', 'Mar√≠a Rodr√≠guez', '2.45', '47', 'QmX8vD3z2Y5...')">
                                <i class="fas fa-eye mr-2"></i>Ver Detalles
                            </button>
                        </div>
                    </div>
                    
                    <!-- Canci√≥n 2 -->
                    <div class="p-4 bg-gray-800/50 rounded-lg hover:bg-gray-800/70 transition-all">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <h4 class="text-lg font-semibold text-white mb-2">üéµ Noches sin Fin</h4>
                                <div class="space-y-2">
                                    <div class="flex items-center gap-2 text-sm">
                                        <span class="text-gray-400">IPFS:</span>
                                        <span class="text-purple-400 font-mono text-xs">QmY5kL8m4Z9...</span>
                                    </div>
                                    <div class="flex items-center gap-4">
                                        <div class="flex items-center gap-2">
                                            <i class="fas fa-coins text-green-400"></i>
                                            <span class="text-gray-400">Recaudado:</span>
                                            <span class="text-green-400 font-bold">1.23 ETH</span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <i class="fas fa-heart text-red-400"></i>
                                            <span class="text-gray-400">Donaciones:</span>
                                            <span class="text-blue-400 font-bold">28</span>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-2 text-xs text-gray-500 mt-2">
                                        <i class="fas fa-calendar"></i>
                                        <span>Subida hace 1 semana</span>
                                    </div>
                                </div>
                            </div>
                            <button class="btn-morpho btn-morpho-ghost btn-sm" onclick="showSongDetails('2', 'Noches sin Fin', 'Mar√≠a Rodr√≠guez', '1.23', '28', 'QmY5kL8m4Z9...')">
                                <i class="fas fa-eye mr-2"></i>Ver Detalles
                            </button>
                        </div>
                    </div>
                    
                    <!-- Canci√≥n 3 -->
                    <div class="p-4 bg-gray-800/50 rounded-lg hover:bg-gray-800/70 transition-all">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <h4 class="text-lg font-semibold text-white mb-2">üéµ Camino al Cielo</h4>
                                <div class="space-y-2">
                                    <div class="flex items-center gap-2 text-sm">
                                        <span class="text-gray-400">IPFS:</span>
                                        <span class="text-purple-400 font-mono text-xs">QmZ6pN9q2W7...</span>
                                    </div>
                                    <div class="flex items-center gap-4">
                                        <div class="flex items-center gap-2">
                                            <i class="fas fa-coins text-green-400"></i>
                                            <span class="text-gray-400">Recaudado:</span>
                                            <span class="text-green-400 font-bold">0.89 ETH</span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <i class="fas fa-heart text-red-400"></i>
                                            <span class="text-gray-400">Donaciones:</span>
                                            <span class="text-blue-400 font-bold">18</span>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-2 text-xs text-gray-500 mt-2">
                                        <i class="fas fa-calendar"></i>
                                        <span>Subida hace 3 d√≠as</span>
                                    </div>
                                </div>
                            </div>
                            <button class="btn-morpho btn-morpho-ghost btn-sm" onclick="showSongDetails('3', 'Camino al Cielo', 'Mar√≠a Rodr√≠guez', '0.89', '18', 'QmZ6pN9q2W7...')">
                                <i class="fas fa-eye mr-2"></i>Ver Detalles
                            </button>
                        </div>
                    </div>
                    
                    <div class="mt-4 pt-4 border-t border-gray-700">
                        <div class="grid grid-cols-2 gap-4 text-center">
                            <div>
                                <p class="text-gray-400 text-sm mb-1">Total Recaudado</p>
                                <p class="text-2xl font-bold text-purple-400">4.57 ETH</p>
                            </div>
                            <div>
                                <p class="text-gray-400 text-sm mb-1">Total Donaciones</p>
                                <p class="text-2xl font-bold text-blue-400">93</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Subir Canci√≥n -->
            <div class="morpho-card">
                <h3 class="text-2xl font-light mb-6 flex items-center gap-3">
                    <span class="text-3xl">‚ûï</span> Subir Canci√≥n
                </h3>
                <p class="text-gray-400 mb-4">Comparte tu m√∫sica con la comunidad</p>
                <div class="grid-morpho grid-morpho-1 gap-4">
                    <input id="songTitle" type="text" class="input-morpho" placeholder="T√≠tulo de la canci√≥n">
                    <input id="songIpfsHash" type="text" class="input-morpho" placeholder="IPFS Hash (content identifier)">
                    <button id="uploadSongBtn" class="btn-morpho btn-morpho-accent">
                        <i class="fas fa-cloud-upload-alt mr-2"></i>Subir Canci√≥n
                    </button>
                </div>
            </div>
        </section>

        <!-- Secci√≥n Antigua de Creadores (oculta) -->
        <section id="section-creadores-old" class="section-morpho hidden">
            <div class="flex items-center gap-4 mb-6 flex-wrap">
                <h2 class="section-morpho-title text-gradient-morpho">Creatividad y Econom√≠a de Creadores</h2>
                <span class="badge-morpho">
                    <i class="fas fa-code"></i> Powered by Stylus (Rust)
                </span>
            </div>
            <p class="section-morpho-subtitle">Comunidad de apoyo mutuo para creativos. √önete con 1 token y accede a pr√©stamos, publicaciones y finanzas inclusivas.</p>
            
            <!-- Sistema de Comunidad -->
            <div class="morpho-card mt-8">
                <h3 class="text-xl font-light mb-6 flex items-center gap-2">
                    <i class="fas fa-users"></i>
                    Comunidad de Creativos
                </h3>
                <p class="text-gray-400 mb-6 text-sm">Suscr√≠bete con solo 0.00001 ETH (Arbitrum, Scroll, Base o ENS) para unirte a la comunidad y acceder a todas las funcionalidades.</p>
                <div class="grid-morpho grid-morpho-3 mb-6">
                    <div class="stats-card-morpho">
                        <div class="text-sm text-gray-400 mb-2">Estado de Membres√≠a</div>
                        <div id="membershipStatus" class="text-lg font-light text-red-400">No miembro</div>
                    </div>
                    <div class="stats-card-morpho">
                        <div class="text-sm text-gray-400 mb-2">Total de Miembros</div>
                        <div id="memberCount" class="text-lg font-light">0</div>
                    </div>
                    <div class="stats-card-morpho">
                        <div class="text-sm text-gray-400 mb-2">Precio de Suscripci√≥n</div>
                        <div id="subscriptionPrice" class="text-lg font-light">0.00001 ETH</div>
                    </div>
                </div>
                <div class="flex gap-4">
                    <button id="subscribeCommunityBtn" class="btn-morpho btn-morpho-accent">
                        <i class="fas fa-crown mr-2"></i>Unirse a la Comunidad
                    </button>
                    <button id="checkMembershipBtn" class="btn-morpho btn-morpho-ghost">
                        <i class="fas fa-check mr-2"></i>Verificar Membres√≠a
                    </button>
                </div>
            </div>

            <!-- Sistema de Pr√©stamos -->
            <div class="morpho-card mt-6">
                <h3 class="text-xl font-light mb-6 flex items-center gap-2">
                    <i class="fas fa-hand-holding-usd"></i>
                    Pr√©stamos para Creativos
                </h3>
                <p class="text-gray-400 mb-6 text-sm">Solicita pr√©stamos de la comunidad o apoya a otros creativos prestando fondos.</p>
                
                <!-- Solicitar Pr√©stamo -->
                <div class="mb-6 p-4 bg-gray-800/50 rounded-lg">
                    <h4 class="text-lg font-light mb-4">Solicitar Pr√©stamo</h4>
                    <div class="grid-morpho grid-morpho-2 gap-4 mb-4">
                        <input id="loanAmount" type="number" step="0.001" min="0.001" class="input-morpho" placeholder="Monto (ETH)">
                        <input id="loanInterest" type="number" step="1" min="0" max="100" class="input-morpho" placeholder="Tasa de inter√©s (%)">
                        <input id="loanDays" type="number" step="1" min="1" class="input-morpho" placeholder="Duraci√≥n (d√≠as)">
                        <input id="loanDescription" type="text" class="input-morpho" placeholder="Descripci√≥n del proyecto">
                    </div>
                    <button id="requestLoanBtn" class="btn-morpho btn-morpho-accent">
                        <i class="fas fa-plus mr-2"></i>Solicitar Pr√©stamo
                    </button>
                </div>

                <!-- Aprobar y Financiar Pr√©stamos -->
                <div class="mb-6 p-4 bg-gray-800/50 rounded-lg">
                    <h4 class="text-lg font-light mb-4">Pr√©stamos Pendientes</h4>
                    <div id="pendingLoansList" class="space-y-3">
                        <p class="text-gray-400 text-sm">No hay pr√©stamos pendientes</p>
                    </div>
                </div>

                <!-- Mis Pr√©stamos -->
                <div class="p-4 bg-gray-800/50 rounded-lg">
                    <h4 class="text-lg font-light mb-4">Mis Pr√©stamos</h4>
                    <div id="myLoansList" class="space-y-3">
                        <p class="text-gray-400 text-sm">No tienes pr√©stamos</p>
                    </div>
                </div>
            </div>

            <!-- Bur√≥ de Cr√©dito y Finanzas Inclusivas -->
            <div class="morpho-card mt-6">
                <h3 class="text-xl font-light mb-6 flex items-center gap-2">
                    <i class="fas fa-chart-line"></i>
                    Finanzas Inclusivas - Bur√≥ de Cr√©dito
                </h3>
                <p class="text-gray-400 mb-6 text-sm">Muestra tu historial de pagos, score de cr√©dito y obt√©n cashback por cumplir con tus pagos.</p>
                
                <div class="grid-morpho grid-morpho-3 mb-6">
                    <div class="stats-card-morpho">
                        <div class="text-sm text-gray-400 mb-2">Score de Cr√©dito</div>
                        <div id="creditScore" class="text-2xl font-light text-purple-400">-</div>
                        <div class="text-xs text-gray-500 mt-1">0-1000</div>
                    </div>
                    <div class="stats-card-morpho">
                        <div class="text-sm text-gray-400 mb-2">Total Pagado</div>
                        <div id="totalPaid" class="text-lg font-light">0 ETH</div>
                    </div>
                    <div class="stats-card-morpho">
                        <div class="text-sm text-gray-400 mb-2">Cashback Disponible</div>
                        <div id="cashbackBalance" class="text-lg font-light text-green-400">0 ETH</div>
                    </div>
                </div>

                <div class="flex gap-4 mb-6">
                    <button id="checkCreditBtn" class="btn-morpho btn-morpho-primary">
                        <i class="fas fa-sync-alt mr-2"></i>Actualizar Estad√≠sticas
                    </button>
                    <button id="withdrawCashbackBtn" class="btn-morpho btn-morpho-accent">
                        <i class="fas fa-money-bill-wave mr-2"></i>Retirar Cashback
                    </button>
                </div>

                <!-- Historial de Pagos -->
                <div class="p-4 bg-gray-800/50 rounded-lg">
                    <h4 class="text-lg font-light mb-4">Historial de Pagos</h4>
                    <div id="paymentHistoryList" class="space-y-2">
                        <p class="text-gray-400 text-sm">No hay historial de pagos</p>
                    </div>
                </div>
            </div>

            <!-- Sistema de Publicaciones -->
            <div class="morpho-card mt-6">
                <h3 class="text-xl font-light mb-6 flex items-center gap-2">
                    <i class="fas fa-edit"></i>
                    Publicaciones de Creativos
                </h3>
                <p class="text-gray-400 mb-6 text-sm">Comparte tus proyectos, ideas y trabajos con la comunidad.</p>
                
                <!-- Formulario de Publicaci√≥n -->
                <div class="mb-6 p-4 bg-gray-800/50 rounded-lg">
                    <h4 class="text-lg font-light mb-4">Crear Nueva Publicaci√≥n</h4>
                    <div class="space-y-4">
                        <input id="postTitle" type="text" class="input-morpho w-full" placeholder="T√≠tulo de la publicaci√≥n">
                        <textarea id="postContent" class="input-morpho w-full" rows="5" placeholder="Contenido de la publicaci√≥n"></textarea>
                        <input id="postImageUrl" type="text" class="input-morpho w-full" placeholder="URL de imagen (opcional)">
                        <button id="createPostBtn" class="btn-morpho btn-morpho-accent">
                            <i class="fas fa-paper-plane mr-2"></i>Publicar
                        </button>
                    </div>
                </div>

                <!-- Lista de Publicaciones -->
                <div class="p-4 bg-gray-800/50 rounded-lg">
                    <h4 class="text-lg font-light mb-4">Publicaciones Recientes</h4>
                    <div id="postsList" class="space-y-4">
                        <div class="post-item p-4 bg-gray-900/50 rounded-lg">
                            <p class="text-gray-400 text-sm">No hay publicaciones a√∫n. ¬°S√© el primero en compartir!</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="section-arbitrum" class="section-morpho hidden">
            <h2 class="section-morpho-title text-gradient-morpho">Introducci√≥n a Arbitrum</h2>
            <p class="text-xl text-gray-300 mb-8">En un mundo donde las blockchains enfrentan el trilema de escalabilidad, <strong class="text-purple-400">Arbitrum ofrece la velocidad y bajo costo que necesitamos</strong>.</p>
            
            <div class="bg-gradient-to-r from-purple-600/20 to-blue-600/20 rounded-lg p-6 mb-8">
                <p class="text-lg text-gray-200 mb-4"><strong>Arbitrum es la soluci√≥n de Capa 2 (Layer 2) l√≠der para escalar Ethereum.</strong></p>
                <p class="text-gray-300">Une a desarrolladores, usuarios y aplicaciones en un ecosistema poderoso para transacciones r√°pidas, econ√≥micas y seguras.</p>
                <p class="text-gray-300 mt-4">Con Arbitrum, puedes construir cualquier tipo de aplicaci√≥n descentralizada ‚ÄîDeFi, NFTs, gaming, DAOs‚Äî cualquier servicio que necesites para escalar sin comprometer la seguridad de Ethereum.</p>
            </div>

            <!-- Arbitrum One -->
            <div class="bg-gray-800/80 backdrop-blur-sm rounded-lg p-6 mb-6">
                <h3 class="text-2xl font-bold mb-4 text-purple-400">‚ö° Arbitrum One: Rollup Optimista (Optimistic Rollup)</h3>
                <p class="text-gray-300 mb-4">Es la cadena principal de Arbitrum que procesa transacciones fuera de Ethereum (off-chain) pero hereda la seguridad de Ethereum (on-chain).</p>
                <p class="text-gray-300 mb-4">Funciona bajo el concepto de "optimismo": asume que todas las transacciones son v√°lidas a menos que alguien pruebe lo contrario durante el per√≠odo de desaf√≠o (7 d√≠as).</p>
                <div class="bg-gray-700/50 rounded p-4">
                    <p class="text-gray-200"><strong>Ventajas:</strong></p>
                    <ul class="list-disc list-inside text-gray-300 mt-2 space-y-1">
                        <li>Puedes ejecutar contratos inteligentes exactamente igual que en Ethereum</li>
                        <li>Tarifas hasta <strong class="text-green-400">90% m√°s bajas</strong></li>
                        <li>Velocidad hasta <strong class="text-green-400">10x mayor</strong></li>
                        <li>Mantiene la seguridad y descentralizaci√≥n de Ethereum</li>
                    </ul>
                </div>
            </div>

            <!-- Arbitrum Stylus -->
            <div class="bg-gray-800/80 backdrop-blur-sm rounded-lg p-6 mb-6">
                <h3 class="text-2xl font-bold mb-4 text-purple-400">üöÄ Arbitrum Stylus: La Siguiente Generaci√≥n de Smart Contracts</h3>
                <p class="text-gray-300 mb-4">Una tecnolog√≠a revolucionaria que permite escribir contratos inteligentes en m√∫ltiples lenguajes de programaci√≥n como <strong>Rust, C, C++</strong>, adem√°s de Solidity.</p>
                <p class="text-gray-300 mb-4">Ofrece hasta <strong class="text-green-400">10x mejor rendimiento</strong> comparado con contratos en Solidity, gracias a la compilaci√≥n a WebAssembly (WASM).</p>
                <div class="bg-gray-700/50 rounded p-4">
                    <p class="text-gray-200"><strong>Ejemplos de ventajas con Stylus:</strong></p>
                    <ul class="list-disc list-inside text-gray-300 mt-2 space-y-1">
                        <li><strong>Contratos en Rust:</strong> Mayor seguridad, mejor rendimiento</li>
                        <li><strong>Interoperabilidad total:</strong> Los contratos en diferentes lenguajes pueden comunicarse entre s√≠</li>
                        <li><strong>Costos reducidos:</strong> Gas m√°s eficiente gracias a optimizaciones de WASM</li>
                    </ul>
                </div>
            </div>

            <!-- Arbitrum Orbit -->
            <div class="bg-gray-800/80 backdrop-blur-sm rounded-lg p-6 mb-6">
                <h3 class="text-2xl font-bold mb-4 text-purple-400">üåê Arbitrum Orbit: Crea Tu Propia Blockchain L3</h3>
                <p class="text-gray-300 mb-4">Una plataforma que permite a cualquier proyecto crear su propia cadena (Layer 3) sobre Arbitrum.</p>
                <p class="text-gray-300 mb-4">Puedes personalizar gas tokens, privacidad, permisos y m√°s, mientras aprovechas la infraestructura de Arbitrum.</p>
                <p class="text-gray-300"><strong>Ideal para:</strong> empresas, DAOs y proyectos que necesitan su propia blockchain sin construir todo desde cero.</p>
            </div>

            <!-- Resumen -->
            <div class="bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg p-6 mb-6">
                <p class="text-xl text-white mb-4"><strong>La seguridad de Ethereum, pero con la velocidad y costos de una blockchain moderna.</strong></p>
                <p class="text-white/90">Puedes construir cualquier aplicaci√≥n descentralizada en el lenguaje de programaci√≥n que desees (con Stylus), y hacerlo escalable sin sacrificar la seguridad de Ethereum.</p>
            </div>

            <!-- ¬øPor qu√© Arbitrum? -->
            <div class="bg-gray-800/80 backdrop-blur-sm rounded-lg p-6">
                <h3 class="text-2xl font-bold mb-4">‚úÖ ¬øPor qu√© Arbitrum?</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="flex items-start">
                        <i class="fas fa-check-circle text-green-500 mr-3 mt-1"></i>
                        <div>
                            <strong class="text-gray-200">Compatible con Ethereum:</strong>
                            <p class="text-gray-400">Misma EVM, mismo c√≥digo Solidity</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <i class="fas fa-check-circle text-green-500 mr-3 mt-1"></i>
                        <div>
                            <strong class="text-gray-200">Ultra r√°pido:</strong>
                            <p class="text-gray-400">Confirmaciones en segundos</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <i class="fas fa-check-circle text-green-500 mr-3 mt-1"></i>
                        <div>
                            <strong class="text-gray-200">Costos bajos:</strong>
                            <p class="text-gray-400">Hasta 95% m√°s barato que Ethereum</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <i class="fas fa-check-circle text-green-500 mr-3 mt-1"></i>
                        <div>
                            <strong class="text-gray-200">Seguro:</strong>
                            <p class="text-gray-400">Hereda la seguridad de Ethereum</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <i class="fas fa-check-circle text-green-500 mr-3 mt-1"></i>
                        <div>
                            <strong class="text-gray-200">Ecosistema robusto:</strong>
                            <p class="text-gray-400">Miles de aplicaciones y desarrolladores</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <i class="fas fa-check-circle text-green-500 mr-3 mt-1"></i>
                        <div>
                            <strong class="text-gray-200">Innovaci√≥n continua:</strong>
                            <p class="text-gray-400">Stylus, Orbit y m√°s tecnolog√≠as emergentes</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CTAs -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                <button class="bg-purple-600 hover:bg-purple-700 px-4 py-3 rounded" id="cta-pagar-arbitrum">Pagar en Arbitrum</button>
                <button class="bg-purple-600 hover:bg-purple-700 px-4 py-3 rounded" id="cta-defi-arbitrum">Probar DeFi</button>
                <button class="bg-purple-600 hover:bg-purple-700 px-4 py-3 rounded" id="cta-crosschain">Cross-chain demo</button>
            </div>
        </section>

        <!-- Secci√≥n Apoyar Comunidad -->
        <section id="section-apoyar" class="section-morpho hidden">
            <h2 class="section-morpho-title text-gradient-morpho mb-8">Apoyar Comunidad</h2>
            
            <!-- Explorar Canciones -->
            <div class="morpho-card mb-8">
                <h3 class="text-2xl font-light mb-6 flex items-center gap-3">
                    <span class="text-3xl">‚ù§Ô∏è</span> Explorar Canciones
                </h3>
                <div id="songsList" class="space-y-4">
                    <!-- Canci√≥n 1 -->
                    <div class="song-item p-4 bg-gray-800/50 rounded-lg hover:bg-gray-800/70 transition-all">
                        <div class="flex items-center justify-between gap-4">
                            <div class="flex-1">
                                <h4 class="text-lg font-semibold text-white mb-1">üéµ Luna de Fuego</h4>
                                <p class="text-gray-400 text-sm">Por: <span class="text-purple-400">Mar√≠a Rodr√≠guez</span></p>
                                
                                <!-- Reproductor -->
                                <div class="mt-3 flex items-center gap-3 bg-gray-900/50 rounded-lg p-2">
                                    <button class="w-8 h-8 bg-purple-600 hover:bg-purple-700 rounded-full flex items-center justify-center transition-all" onclick="togglePlay('player1', this)">
                                        <i class="fas fa-play text-white text-xs ml-0.5"></i>
                                    </button>
                                    <div class="flex-1">
                                        <div class="flex items-center gap-2 mb-1">
                                            <div class="h-1 bg-gray-700 rounded-full flex-1 cursor-pointer relative" onclick="seekSong(this, 'player1', 222)">
                                                <div class="h-1 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full player-progress" style="width: 0%"></div>
                                                <div class="absolute top-1/2 left-0 w-3 h-3 bg-purple-500 rounded-full player-handle transform -translate-y-1/2" style="left: 0%"></div>
                                            </div>
                                            <span class="text-xs text-gray-400 font-mono min-w-[50px]">0:00</span>
                                        </div>
                                        <div class="text-xs text-gray-500">3:42</div>
                                    </div>
                                    <div class="flex items-center gap-2 text-xs text-gray-400">
                                        <button onclick="adjustVolume('player1', -0.1)" class="hover:text-purple-400"><i class="fas fa-volume-down"></i></button>
                                        <div class="w-16 h-1 bg-gray-700 rounded-full cursor-pointer relative" onclick="setVolume(this, 'player1')">
                                            <div class="h-1 bg-purple-500 rounded-full volume-bar" style="width: 70%"></div>
                                        </div>
                                        <button onclick="adjustVolume('player1', 0.1)" class="hover:text-purple-400"><i class="fas fa-volume-up"></i></button>
                                    </div>
                                </div>
                                
                                <div class="mt-2 flex items-center gap-4 text-sm">
                                    <span class="text-gray-500">üí∞ Total: <span class="text-green-400">2.45 ETH</span></span>
                                    <span class="text-gray-500">üìä Donadores: <span class="text-blue-400">47</span></span>
                                </div>
                            </div>
                            <div class="flex flex-col gap-2">
                                <button class="btn-morpho btn-morpho-accent donate-song-btn" data-song-id="1">
                                    <i class="fas fa-heart mr-2"></i>Donar
                                </button>
                                <button class="btn-morpho btn-morpho-ghost btn-sm" onclick="showSongDetails('1', 'Luna de Fuego', 'Mar√≠a Rodr√≠guez', '2.45', '47', 'QmX8vD3z2Y5...')">
                                    <i class="fas fa-eye mr-2"></i>Detalles
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Canci√≥n 2 -->
                    <div class="song-item p-4 bg-gray-800/50 rounded-lg hover:bg-gray-800/70 transition-all">
                        <div class="flex items-center justify-between gap-4">
                            <div class="flex-1">
                                <h4 class="text-lg font-semibold text-white mb-1">üéµ Ciudad Vieja</h4>
                                <p class="text-gray-400 text-sm">Por: <span class="text-purple-400">Carlos Mendez</span></p>
                                
                                <!-- Reproductor -->
                                <div class="mt-3 flex items-center gap-3 bg-gray-900/50 rounded-lg p-2">
                                    <button class="w-8 h-8 bg-purple-600 hover:bg-purple-700 rounded-full flex items-center justify-center transition-all" onclick="togglePlay('player2', this)">
                                        <i class="fas fa-play text-white text-xs ml-0.5"></i>
                                    </button>
                                    <div class="flex-1">
                                        <div class="flex items-center gap-2 mb-1">
                                            <div class="h-1 bg-gray-700 rounded-full flex-1 cursor-pointer relative" onclick="seekSong(this, 'player2', 198)">
                                                <div class="h-1 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full player-progress" style="width: 0%"></div>
                                                <div class="absolute top-1/2 left-0 w-3 h-3 bg-purple-500 rounded-full player-handle transform -translate-y-1/2" style="left: 0%"></div>
                                            </div>
                                            <span class="text-xs text-gray-400 font-mono min-w-[50px]">0:00</span>
                                        </div>
                                        <div class="text-xs text-gray-500">3:18</div>
                                    </div>
                                    <div class="flex items-center gap-2 text-xs text-gray-400">
                                        <button onclick="adjustVolume('player2', -0.1)" class="hover:text-purple-400"><i class="fas fa-volume-down"></i></button>
                                        <div class="w-16 h-1 bg-gray-700 rounded-full cursor-pointer relative" onclick="setVolume(this, 'player2')">
                                            <div class="h-1 bg-purple-500 rounded-full volume-bar" style="width: 70%"></div>
                                        </div>
                                        <button onclick="adjustVolume('player2', 0.1)" class="hover:text-purple-400"><i class="fas fa-volume-up"></i></button>
                                    </div>
                                </div>
                                
                                <div class="mt-2 flex items-center gap-4 text-sm">
                                    <span class="text-gray-500">üí∞ Total: <span class="text-green-400">1.89 ETH</span></span>
                                    <span class="text-gray-500">üìä Donadores: <span class="text-blue-400">32</span></span>
                                </div>
                            </div>
                            <div class="flex flex-col gap-2">
                                <button class="btn-morpho btn-morpho-accent donate-song-btn" data-song-id="2">
                                    <i class="fas fa-heart mr-2"></i>Donar
                                </button>
                                <button class="btn-morpho btn-morpho-ghost btn-sm" onclick="showSongDetails('5', 'Ciudad Vieja', 'Carlos Mendez', '1.89', '32', 'QmC1K9m3N8...')">
                                    <i class="fas fa-eye mr-2"></i>Detalles
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Canci√≥n 3 -->
                    <div class="song-item p-4 bg-gray-800/50 rounded-lg hover:bg-gray-800/70 transition-all">
                        <div class="flex items-center justify-between gap-4">
                            <div class="flex-1">
                                <h4 class="text-lg font-semibold text-white mb-1">üéµ Ritmo Libre</h4>
                                <p class="text-gray-400 text-sm">Por: <span class="text-purple-400">Ana Garc√≠a</span></p>
                                
                                <!-- Reproductor -->
                                <div class="mt-3 flex items-center gap-3 bg-gray-900/50 rounded-lg p-2">
                                    <button class="w-8 h-8 bg-purple-600 hover:bg-purple-700 rounded-full flex items-center justify-center transition-all" onclick="togglePlay('player3', this)">
                                        <i class="fas fa-play text-white text-xs ml-0.5"></i>
                                    </button>
                                    <div class="flex-1">
                                        <div class="flex items-center gap-2 mb-1">
                                            <div class="h-1 bg-gray-700 rounded-full flex-1 cursor-pointer relative" onclick="seekSong(this, 'player3', 245)">
                                                <div class="h-1 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full player-progress" style="width: 0%"></div>
                                                <div class="absolute top-1/2 left-0 w-3 h-3 bg-purple-500 rounded-full player-handle transform -translate-y-1/2" style="left: 0%"></div>
                                            </div>
                                            <span class="text-xs text-gray-400 font-mono min-w-[50px]">0:00</span>
                                        </div>
                                        <div class="text-xs text-gray-500">4:05</div>
                                    </div>
                                    <div class="flex items-center gap-2 text-xs text-gray-400">
                                        <button onclick="adjustVolume('player3', -0.1)" class="hover:text-purple-400"><i class="fas fa-volume-down"></i></button>
                                        <div class="w-16 h-1 bg-gray-700 rounded-full cursor-pointer relative" onclick="setVolume(this, 'player3')">
                                            <div class="h-1 bg-purple-500 rounded-full volume-bar" style="width: 70%"></div>
                                        </div>
                                        <button onclick="adjustVolume('player3', 0.1)" class="hover:text-purple-400"><i class="fas fa-volume-up"></i></button>
                                    </div>
                                </div>
                                
                                <div class="mt-2 flex items-center gap-4 text-sm">
                                    <span class="text-gray-500">üí∞ Total: <span class="text-green-400">3.12 ETH</span></span>
                                    <span class="text-gray-500">üìä Donadores: <span class="text-blue-400">58</span></span>
                                </div>
                            </div>
                            <div class="flex flex-col gap-2">
                                <button class="btn-morpho btn-morpho-accent donate-song-btn" data-song-id="3">
                                    <i class="fas fa-heart mr-2"></i>Donar
                                </button>
                                <button class="btn-morpho btn-morpho-ghost btn-sm" onclick="showSongDetails('3', 'Ritmo Libre', 'Ana Garc√≠a', '3.12', '58', 'QmZ6pN9q2W7...')">
                                    <i class="fas fa-eye mr-2"></i>Detalles
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Canci√≥n 4 -->
                    <div class="song-item p-4 bg-gray-800/50 rounded-lg hover:bg-gray-800/70 transition-all">
                        <div class="flex items-center justify-between gap-4">
                            <div class="flex-1">
                                <h4 class="text-lg font-semibold text-white mb-1">üéµ Brisas del Desierto</h4>
                                <p class="text-gray-400 text-sm">Por: <span class="text-purple-400">Roberto Silva</span></p>
                                
                                <!-- Reproductor -->
                                <div class="mt-3 flex items-center gap-3 bg-gray-900/50 rounded-lg p-2">
                                    <button class="w-8 h-8 bg-purple-600 hover:bg-purple-700 rounded-full flex items-center justify-center transition-all" onclick="togglePlay('player4', this)">
                                        <i class="fas fa-play text-white text-xs ml-0.5"></i>
                                    </button>
                                    <div class="flex-1">
                                        <div class="flex items-center gap-2 mb-1">
                                            <div class="h-1 bg-gray-700 rounded-full flex-1 cursor-pointer relative" onclick="seekSong(this, 'player4', 174)">
                                                <div class="h-1 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full player-progress" style="width: 0%"></div>
                                                <div class="absolute top-1/2 left-0 w-3 h-3 bg-purple-500 rounded-full player-handle transform -translate-y-1/2" style="left: 0%"></div>
                                            </div>
                                            <span class="text-xs text-gray-400 font-mono min-w-[50px]">0:00</span>
                                        </div>
                                        <div class="text-xs text-gray-500">2:54</div>
                                    </div>
                                    <div class="flex items-center gap-2 text-xs text-gray-400">
                                        <button onclick="adjustVolume('player4', -0.1)" class="hover:text-purple-400"><i class="fas fa-volume-down"></i></button>
                                        <div class="w-16 h-1 bg-gray-700 rounded-full cursor-pointer relative" onclick="setVolume(this, 'player4')">
                                            <div class="h-1 bg-purple-500 rounded-full volume-bar" style="width: 70%"></div>
                                        </div>
                                        <button onclick="adjustVolume('player4', 0.1)" class="hover:text-purple-400"><i class="fas fa-volume-up"></i></button>
                                    </div>
                                </div>
                                
                                <div class="mt-2 flex items-center gap-4 text-sm">
                                    <span class="text-gray-500">üí∞ Total: <span class="text-green-400">0.87 ETH</span></span>
                                    <span class="text-gray-500">üìä Donadores: <span class="text-blue-400">21</span></span>
                                </div>
                            </div>
                            <div class="flex flex-col gap-2">
                                <button class="btn-morpho btn-morpho-accent donate-song-btn" data-song-id="4">
                                    <i class="fas fa-heart mr-2"></i>Donar
                                </button>
                                <button class="btn-morpho btn-morpho-ghost btn-sm" onclick="showSongDetails('4', 'Brisas del Desierto', 'Roberto Silva', '0.87', '21', 'QmB8cK3m7N...')">
                                    <i class="fas fa-eye mr-2"></i>Detalles
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mis Donaciones -->
            <div class="morpho-card mb-8">
                <h3 class="text-2xl font-light mb-6 flex items-center gap-3">
                    <span class="text-3xl">üí∞</span> Mis Donaciones
                </h3>
                <div id="myDonationsList" class="space-y-3">
                    <!-- Donaci√≥n 1 -->
                    <div class="p-3 bg-gray-800/50 rounded-lg">
                        <div class="flex items-center justify-between mb-3">
                            <div>
                                <p class="text-white font-semibold">üéµ Luna de Fuego</p>
                                <p class="text-gray-400 text-sm">Hace 2 d√≠as</p>
                            </div>
                            <div class="text-right">
                                <p class="text-green-400 font-bold">0.15 ETH</p>
                                <p class="text-gray-500 text-xs">Confirmado</p>
                            </div>
                        </div>
                        
                        <!-- Reproductor -->
                        <div class="flex items-center gap-3 bg-gray-900/50 rounded-lg p-2">
                            <button class="w-8 h-8 bg-purple-600 hover:bg-purple-700 rounded-full flex items-center justify-center transition-all" onclick="togglePlay('donate-player1', this)">
                                <i class="fas fa-play text-white text-xs ml-0.5"></i>
                            </button>
                            <div class="flex-1">
                                <div class="flex items-center gap-2 mb-1">
                                    <div class="h-1 bg-gray-700 rounded-full flex-1 cursor-pointer relative" onclick="seekSong(this, 'donate-player1', 222)">
                                        <div class="h-1 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full player-progress" style="width: 0%"></div>
                                        <div class="absolute top-1/2 left-0 w-3 h-3 bg-purple-500 rounded-full player-handle transform -translate-y-1/2" style="left: 0%"></div>
                                    </div>
                                    <span class="text-xs text-gray-400 font-mono min-w-[50px]">0:00</span>
                                </div>
                                <div class="text-xs text-gray-500">3:42</div>
                            </div>
                            <div class="flex items-center gap-2 text-xs text-gray-400">
                                <button onclick="adjustVolume('donate-player1', -0.1)" class="hover:text-purple-400"><i class="fas fa-volume-down"></i></button>
                                <div class="w-16 h-1 bg-gray-700 rounded-full cursor-pointer relative" onclick="setVolume(this, 'donate-player1')">
                                    <div class="h-1 bg-purple-500 rounded-full volume-bar" style="width: 70%"></div>
                                </div>
                                <button onclick="adjustVolume('donate-player1', 0.1)" class="hover:text-purple-400"><i class="fas fa-volume-up"></i></button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Donaci√≥n 2 -->
                    <div class="p-3 bg-gray-800/50 rounded-lg">
                        <div class="flex items-center justify-between mb-3">
                            <div>
                                <p class="text-white font-semibold">üéµ Ritmo Libre</p>
                                <p class="text-gray-400 text-sm">Hace 5 d√≠as</p>
                            </div>
                            <div class="text-right">
                                <p class="text-green-400 font-bold">0.08 ETH</p>
                                <p class="text-gray-500 text-xs">Confirmado</p>
                            </div>
                        </div>
                        
                        <!-- Reproductor -->
                        <div class="flex items-center gap-3 bg-gray-900/50 rounded-lg p-2">
                            <button class="w-8 h-8 bg-purple-600 hover:bg-purple-700 rounded-full flex items-center justify-center transition-all" onclick="togglePlay('donate-player2', this)">
                                <i class="fas fa-play text-white text-xs ml-0.5"></i>
                            </button>
                            <div class="flex-1">
                                <div class="flex items-center gap-2 mb-1">
                                    <div class="h-1 bg-gray-700 rounded-full flex-1 cursor-pointer relative" onclick="seekSong(this, 'donate-player2', 245)">
                                        <div class="h-1 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full player-progress" style="width: 0%"></div>
                                        <div class="absolute top-1/2 left-0 w-3 h-3 bg-purple-500 rounded-full player-handle transform -translate-y-1/2" style="left: 0%"></div>
                                    </div>
                                    <span class="text-xs text-gray-400 font-mono min-w-[50px]">0:00</span>
                                </div>
                                <div class="text-xs text-gray-500">4:05</div>
                            </div>
                            <div class="flex items-center gap-2 text-xs text-gray-400">
                                <button onclick="adjustVolume('donate-player2', -0.1)" class="hover:text-purple-400"><i class="fas fa-volume-down"></i></button>
                                <div class="w-16 h-1 bg-gray-700 rounded-full cursor-pointer relative" onclick="setVolume(this, 'donate-player2')">
                                    <div class="h-1 bg-purple-500 rounded-full volume-bar" style="width: 70%"></div>
                                </div>
                                <button onclick="adjustVolume('donate-player2', 0.1)" class="hover:text-purple-400"><i class="fas fa-volume-up"></i></button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Donaci√≥n 3 -->
                    <div class="p-3 bg-gray-800/50 rounded-lg">
                        <div class="flex items-center justify-between mb-3">
                            <div>
                                <p class="text-white font-semibold">üéµ Ciudad Vieja</p>
                                <p class="text-gray-400 text-sm">Hace 1 semana</p>
                            </div>
                            <div class="text-right">
                                <p class="text-green-400 font-bold">0.12 ETH</p>
                                <p class="text-gray-500 text-xs">Confirmado</p>
                            </div>
                        </div>
                        
                        <!-- Reproductor -->
                        <div class="flex items-center gap-3 bg-gray-900/50 rounded-lg p-2">
                            <button class="w-8 h-8 bg-purple-600 hover:bg-purple-700 rounded-full flex items-center justify-center transition-all" onclick="togglePlay('donate-player3', this)">
                                <i class="fas fa-play text-white text-xs ml-0.5"></i>
                            </button>
                            <div class="flex-1">
                                <div class="flex items-center gap-2 mb-1">
                                    <div class="h-1 bg-gray-700 rounded-full flex-1 cursor-pointer relative" onclick="seekSong(this, 'donate-player3', 198)">
                                        <div class="h-1 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full player-progress" style="width: 0%"></div>
                                        <div class="absolute top-1/2 left-0 w-3 h-3 bg-purple-500 rounded-full player-handle transform -translate-y-1/2" style="left: 0%"></div>
                                    </div>
                                    <span class="text-xs text-gray-400 font-mono min-w-[50px]">0:00</span>
                                </div>
                                <div class="text-xs text-gray-500">3:18</div>
                            </div>
                            <div class="flex items-center gap-2 text-xs text-gray-400">
                                <button onclick="adjustVolume('donate-player3', -0.1)" class="hover:text-purple-400"><i class="fas fa-volume-down"></i></button>
                                <div class="w-16 h-1 bg-gray-700 rounded-full cursor-pointer relative" onclick="setVolume(this, 'donate-player3')">
                                    <div class="h-1 bg-purple-500 rounded-full volume-bar" style="width: 70%"></div>
                                </div>
                                <button onclick="adjustVolume('donate-player3', 0.1)" class="hover:text-purple-400"><i class="fas fa-volume-up"></i></button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 pt-4 border-t border-gray-700">
                        <div class="flex items-center justify-between">
                            <p class="text-gray-400">Total donado:</p>
                            <p class="text-xl font-bold text-purple-400">0.35 ETH</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ranking de Donadores -->
            <div class="morpho-card">
                <h3 class="text-2xl font-light mb-6 flex items-center gap-3">
                    <span class="text-3xl">üèÜ</span> Ranking de Donadores
                </h3>
                <div id="topDonorsList" class="space-y-3">
                    <!-- Top 1 -->
                    <div class="p-4 bg-gradient-to-r from-yellow-600/20 to-yellow-800/20 rounded-lg border border-yellow-500/30 flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-yellow-400 to-yellow-600 flex items-center justify-center text-white font-bold text-lg">
                                1ü•á
                            </div>
                            <div>
                                <p class="text-white font-semibold">0x742d...A1B3</p>
                                <p class="text-gray-400 text-sm">17 donaciones</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-yellow-400 font-bold text-xl">8.42 ETH</p>
                            <div class="flex items-center gap-1 mt-1">
                                <span class="text-yellow-400">‚≠ê‚≠ê‚≠ê</span>
                                <span class="text-gray-500 text-xs">Top Donator</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Top 2 -->
                    <div class="p-4 bg-gradient-to-r from-gray-700/50 to-gray-800/50 rounded-lg border border-gray-600/30 flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-gray-400 to-gray-600 flex items-center justify-center text-white font-bold text-lg">
                                2ü•à
                            </div>
                            <div>
                                <p class="text-white font-semibold">0x9F3A...C2D4</p>
                                <p class="text-gray-400 text-sm">12 donaciones</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-gray-300 font-bold text-xl">5.67 ETH</p>
                            <div class="flex items-center gap-1 mt-1">
                                <span class="text-gray-400">‚≠ê‚≠ê</span>
                                <span class="text-gray-500 text-xs">Supporter</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Top 3 -->
                    <div class="p-4 bg-gradient-to-r from-orange-600/20 to-orange-800/20 rounded-lg border border-orange-500/30 flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center text-white font-bold text-lg">
                                3ü•â
                            </div>
                            <div>
                                <p class="text-white font-semibold">0xB8C1...D5E6</p>
                                <p class="text-gray-400 text-sm">9 donaciones</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-orange-400 font-bold text-xl">4.23 ETH</p>
                            <div class="flex items-center gap-1 mt-1">
                                <span class="text-orange-400">‚≠ê</span>
                                <span class="text-gray-500 text-xs">Contributor</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 pt-4 border-t border-gray-700">
                        <p class="text-gray-400 text-sm text-center">üìä Total de donadores activos: 158</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Secci√≥n Fondo de Incentivos -->
        <section id="section-incentivos" class="section-morpho hidden">
            <h2 class="section-morpho-title text-gradient-morpho mb-8">Fondo de Incentivos</h2>
            
            <!-- Fondo Actual -->
            <div class="morpho-card mb-8">
                <h3 class="text-2xl font-light mb-6 flex items-center gap-3">
                    <span class="text-3xl">üìä</span> Fondo Actual
                </h3>
                <div class="grid-morpho grid-morpho-2">
                    <div class="stats-card-morpho">
                        <div class="text-sm text-gray-400 mb-2">Saldo del Sistema</div>
                        <div id="systemBalance" class="stats-number text-2xl">0 ETH</div>
                    </div>
                    <div class="stats-card-morpho">
                        <div class="text-sm text-gray-400 mb-2">Fondo de Incentivos</div>
                        <div id="incentiveFundBalance" class="stats-number text-2xl">0 ETH</div>
                    </div>
                </div>
                <button id="refreshBalancesBtn" class="btn-morpho btn-morpho-primary mt-4">
                    <i class="fas fa-sync-alt mr-2"></i>Actualizar Saldos
                </button>
            </div>

            <!-- Distribuir Incentivos (Admin) -->
            <div class="morpho-card mb-8">
                <h3 class="text-2xl font-light mb-6 flex items-center gap-3">
                    <span class="text-3xl">ü•á</span> Distribuir Incentivos (Admin)
                </h3>
                <p class="text-gray-400 mb-4">Distribuye recompensas a los usuarios m√°s activos</p>
                <div class="grid-morpho grid-morpho-3 mb-4">
                    <input id="addr1" class="input-morpho" placeholder="Direcci√≥n 1: 0x...">
                    <input id="addr2" class="input-morpho" placeholder="Direcci√≥n 2: 0x...">
                    <input id="addr3" class="input-morpho" placeholder="Direcci√≥n 3: 0x...">
                </div>
                <button id="distributeIncentivesBtn" class="btn-morpho btn-morpho-accent">
                    <i class="fas fa-gift mr-2"></i>Distribuir Incentivos
                </button>
            </div>

            <!-- Historial de Distribuciones -->
            <div class="morpho-card">
                <h3 class="text-2xl font-light mb-6 flex items-center gap-3">
                    <span class="text-3xl">üßæ</span> Historial de Distribuciones
                </h3>
                <div id="distributionHistoryList" class="space-y-3">
                    <p class="text-gray-400 text-sm">No hay distribuciones registradas</p>
                </div>
            </div>
        </section>

        <!-- Secci√≥n Desplegar Stylus (oculta) -->
        <section id="section-deploy" class="mt-12 hidden">
            <div class="flex items-center gap-4 mb-4">
                <h2 class="text-3xl font-bold">Desplegar Contrato Stylus</h2>
                <span class="bg-gradient-to-r from-purple-600 to-blue-600 text-white text-xs font-bold px-3 py-1 rounded-full flex items-center gap-1">
                    <i class="fas fa-rocket"></i> Developer Tools
                </span>
            </div>
            <p class="text-gray-300 mb-6">Despliega tu contrato inteligente escrito en Rust directamente desde el navegador usando MetaMask.</p>

            <div class="bg-gray-800/80 rounded-lg p-6 mb-6">
                <h3 class="text-xl font-bold mb-4">üìã Requisitos</h3>
                <ul class="list-disc list-inside text-gray-300 space-y-2 mb-4">
                    <li>MetaMask instalado y conectado</li>
                    <li>Red configurada: Arbitrum Sepolia o Arbitrum One</li>
                    <li>ETH suficiente para gas (recomendado: 0.01+ ETH)</li>
                    <li>Archivo WASM compilado del contrato</li>
                </ul>
            </div>

            <div class="bg-gray-800/80 rounded-lg p-6 mb-6">
                <h3 class="text-xl font-bold mb-4">üöÄ Desplegar Contrato</h3>
                
                <div class="space-y-4">
                    <!-- Cargar archivo WASM -->
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">
                            Cargar archivo WASM del contrato
                        </label>
                        <input type="file" id="wasmFileInput" accept=".wasm" class="block w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-purple-600 file:text-white hover:file:bg-purple-700">
                        <p class="text-xs text-gray-500 mt-1">Archivo: payments-contract.wasm o tu contrato compilado</p>
                    </div>

                    <!-- Informaci√≥n del archivo -->
                    <div id="wasmInfo" class="hidden bg-gray-700/50 rounded p-4">
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div>
                                <span class="text-gray-400">Tama√±o:</span>
                                <span id="wasmSize" class="ml-2 font-mono text-purple-400"></span>
                            </div>
                            <div>
                                <span class="text-gray-400">Estado:</span>
                                <span id="wasmStatus" class="ml-2 text-green-400">‚úì Listo</span>
                            </div>
                        </div>
                    </div>

                    <!-- Bot√≥n de despliegue -->
                    <div class="flex items-center gap-4">
                        <button id="deployButton" class="bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg font-bold disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-rocket mr-2"></i>Desplegar Contrato
                        </button>
                        <button id="deployQuickButton" class="bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg font-bold">
                            <i class="fas fa-bolt mr-2"></i>Desplegar Payments Contract (Precompilado)
                        </button>
                    </div>

                    <!-- Estado del despliegue -->
                    <div id="deployStatus" class="hidden bg-gray-700/50 rounded p-4">
                        <div class="flex items-center gap-2 mb-2">
                            <i class="fas fa-spinner fa-spin text-purple-400"></i>
                            <span class="font-bold" id="deployStatusText">Desplegando...</span>
                        </div>
                        <div class="text-sm text-gray-300 space-y-1">
                            <div id="deployStep1" class="text-gray-500">‚è≥ Paso 1: Preparando despliegue...</div>
                            <div id="deployStep2" class="text-gray-500">‚è≥ Paso 2: Enviando transacci√≥n de despliegue...</div>
                            <div id="deployStep3" class="text-gray-500">‚è≥ Paso 3: Activando contrato...</div>
                        </div>
                    </div>

                    <!-- Resultado del despliegue -->
                    <div id="deployResult" class="hidden bg-gradient-to-r from-green-600/20 to-blue-600/20 rounded-lg p-6 border border-green-500/30">
                        <h4 class="text-xl font-bold mb-4 text-green-400">
                            <i class="fas fa-check-circle mr-2"></i>¬°Contrato desplegado exitosamente!
                        </h4>
                        <div class="space-y-3">
                            <div>
                                <span class="text-gray-400">Direcci√≥n del contrato:</span>
                                <div class="flex items-center gap-2 mt-1">
                                    <code id="deployedAddress" class="bg-gray-900 px-3 py-2 rounded font-mono text-purple-400"></code>
                                    <button onclick="copyAddress()" class="bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded text-sm">
                                        <i class="fas fa-copy mr-1"></i>Copiar
                                    </button>
                                </div>
                            </div>
                            <div>
                                <span class="text-gray-400">Hash de transacci√≥n:</span>
                                <div class="mt-1">
                                    <a id="deployTxHash" href="#" target="_blank" class="text-purple-400 hover:text-purple-300 underline"></a>
                                </div>
                            </div>
                            <div class="mt-4 p-3 bg-yellow-600/20 rounded border border-yellow-500/30">
                                <p class="text-sm text-yellow-300">
                                    <i class="fas fa-exclamation-triangle mr-2"></i>
                                    <strong>Importante:</strong> Copia esta direcci√≥n y actual√≠zala en <code class="bg-gray-900 px-2 py-1 rounded">contracts-arbitrum.js</code>
                                </p>
                            </div>
                            <button onclick="updateContractsFile()" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded">
                                <i class="fas fa-save mr-2"></i>Actualizar contracts-arbitrum.js autom√°ticamente
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enlace a pruebas -->
            <div class="bg-blue-600/20 rounded-lg p-6 mb-6 border border-blue-500/30">
                <h3 class="text-xl font-bold mb-3 text-blue-400">
                    <i class="fas fa-flask mr-2"></i>P√°gina de Pruebas
                </h3>
                <p class="text-gray-300 mb-4">Prueba todas las funciones del contrato Stylus de forma interactiva.</p>
                <a href="test-stylus.html" target="_blank" class="inline-block bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg font-bold">
                    <i class="fas fa-external-link-alt mr-2"></i>Abrir P√°gina de Pruebas
                </a>
            </div>

            <!-- Informaci√≥n adicional -->
            <div class="bg-gray-800/80 rounded-lg p-6">
                <h3 class="text-xl font-bold mb-4">‚ÑπÔ∏è Informaci√≥n</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-300">
                    <div>
                        <strong class="text-purple-400">Ubicaci√≥n del WASM:</strong>
                        <p class="mt-1">payments-contract/target/wasm32-unknown-unknown/release/stylus_hello_world.wasm</p>
                    </div>
                    <div>
                        <strong class="text-purple-400">Deployer Contract:</strong>
                        <p class="mt-1 font-mono">0xcEcba2F1DC234f70Dd89F2041029807F8D03A990</p>
                    </div>
                    <div>
                        <strong class="text-purple-400">Costo estimado:</strong>
                        <p class="mt-1">~0.001 - 0.01 ETH (depende del tama√±o)</p>
                    </div>
                    <div>
                        <strong class="text-purple-400">Tiempo estimado:</strong>
                        <p class="mt-1">2-5 minutos (2 transacciones)</p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="mt-16 py-8 relative z-10" style="background-color: rgba(10, 10, 10, 0.9); backdrop-filter: blur(20px); border-top: 0.5px solid rgba(255, 255, 255, 0.08);">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-xl font-bold text-purple-500 mb-4">Impulso Web3</h3>
                    <p class="text-gray-400">Comunidad de creadores y artistas conectados mediante blockchain transparente en Arbitrum Stylus</p>
                </div>
                <div>
                    <h3 class="text-xl font-bold text-purple-500 mb-4">Enlaces R√°pidos</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-purple-500 transition-colors">Inicio</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-purple-500 transition-colors">Creadores</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-purple-500 transition-colors">Apoyar a la Comunidad</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold text-purple-500 mb-4">Redes Sociales</h3>
                    <div class="flex space-x-4">
                        <a href="https://www.youtube.com/@vicdanielpaz4949" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-purple-500 transition-colors"><i class="fab fa-youtube text-2xl"></i></a>
                    </div>
                </div>
            </div>
            <div class="mt-8 pt-8 border-t border-gray-700 text-center text-gray-400">
                <p>¬© 2024 Impulso Web3. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Asistente IA Luna: bot√≥n y ventana de chat -->
    <button id="chatToggle" class="morpho-chat-toggle fixed bottom-6 right-6 bg-gradient-to-br from-purple-600 via-purple-500 to-pink-600 hover:from-purple-500 hover:via-purple-400 hover:to-pink-500 text-white rounded-full w-16 h-16 flex items-center justify-center shadow-2xl z-50 transform transition-all duration-300 hover:scale-110 group">
        <div class="absolute inset-0 rounded-full bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400 opacity-0 group-hover:opacity-100 blur-xl transition-opacity duration-300 animate-spin-slow"></div>
        <div class="absolute inset-0 rounded-full bg-gradient-to-br from-white/20 to-transparent"></div>
        <svg class="w-8 h-8 relative z-10" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="20" cy="35" r="8" fill="currentColor" opacity="0.8">
                <animate attributeName="opacity" values="0.8;1;0.8" dur="2s" repeatCount="indefinite"/>
            </circle>
            <circle cx="50" cy="35" r="8" fill="currentColor" opacity="0.8">
                <animate attributeName="opacity" values="0.8;1;0.8" dur="2s" begin="0.2s" repeatCount="indefinite"/>
            </circle>
            <circle cx="80" cy="35" r="8" fill="currentColor" opacity="0.8">
                <animate attributeName="opacity" values="0.8;1;0.8" dur="2s" begin="0.4s" repeatCount="indefinite"/>
            </circle>
            <path d="M20 60 Q35 75 50 70 T80 60" stroke="currentColor" stroke-width="4" stroke-linecap="round" fill="none" opacity="0.7">
                <animate attributeName="d" values="M20 60 Q35 75 50 70 T80 60;M20 58 Q35 73 50 68 T80 58;M20 60 Q35 75 50 70 T80 60" dur="3s" repeatCount="indefinite"/>
            </path>
            <circle cx="45" cy="30" r="3" fill="currentColor" opacity="0.6">
                <animate attributeName="r" values="3;5;3" dur="1.5s" repeatCount="indefinite"/>
            </circle>
        </svg>
        <span class="absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-br from-yellow-300 to-pink-400 rounded-full border-2 border-gray-900 animate-pulse flex items-center justify-center">
            <i class="fas fa-sparkles text-xs text-gray-900"></i>
        </span>
    </button>
    <div id="chatWindow" class="hidden fixed bottom-28 right-6 w-96 max-w-[90vw] bg-gray-900/95 backdrop-blur-xl rounded-2xl shadow-2xl z-50 overflow-hidden border border-purple-500/30 morpho-chat-window">
        <div class="flex items-center justify-between px-5 py-4 bg-gradient-to-r from-purple-900/50 to-pink-900/50 border-b border-purple-500/30">
            <div class="flex items-center space-x-3">
                <div class="relative">
                    <div class="absolute inset-0 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full blur opacity-50 animate-pulse"></div>
                    <i class="fas fa-robot text-purple-300 text-xl relative"></i>
                </div>
                <div>
                    <span id="chatTitle" class="font-bold text-white">Luna AI</span>
                    <div class="flex items-center gap-2 mt-0.5">
                        <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
                        <span class="text-xs text-gray-300">En l√≠nea</span>
                    </div>
                </div>
            </div>
            <button id="chatClose" class="text-gray-400 hover:text-white transition-colors duration-200 hover:bg-gray-700 rounded-lg w-8 h-8 flex items-center justify-center"><i class="fas fa-times"></i></button>
        </div>
        <div id="chatMessages" class="p-4 space-y-3 max-h-96 overflow-y-auto bg-gradient-to-b from-gray-900 to-gray-800 morpho-chat-scroll"></div>
        <form id="chatForm" class="flex items-center gap-2 p-4 bg-gradient-to-r from-gray-900 to-gray-800 border-t border-purple-500/30">
            <input id="chatInput" type="text" class="flex-1 bg-gray-800/50 text-white px-4 py-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500/50 transition-all duration-200 border border-gray-700/50 focus:border-purple-500/50" placeholder="Escribe tu pregunta..." autocomplete="off" />
            <button type="submit" class="bg-gradient-to-br from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 px-5 py-3 rounded-xl transition-all duration-200 transform hover:scale-105 shadow-lg"><i class="fas fa-paper-plane"></i></button>
        </form>
    </div>

    <!-- Modal de Membres√≠a -->
    <div id="membershipModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-gray-800 rounded-lg p-8 max-w-md w-full mx-4 transform transition-all duration-300 scale-95 opacity-0">
            <div class="text-center">
                <div class="text-purple-500 text-6xl mb-4">
                    <i class="fas fa-crown"></i>
                </div>
                <h3 class="text-2xl font-bold mb-4">¬°Se requiere membres√≠a!</h3>
                <p class="text-gray-300 mb-6">Para acceder a esta funcionalidad, necesitas ser miembro de Impulso Web3.</p>
                <div class="flex space-x-4 justify-center">
                    <button class="bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg transition-all duration-300" onclick="closeMembershipModal()">
                        <i class="fas fa-times mr-2"></i>Cancelar
                    </button>
                    <button class="bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 px-6 py-3 rounded-lg transition-all duration-300" onclick="buyMembership()">
                        <i class="fas fa-shopping-cart mr-2"></i>Comprar Membres√≠a
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Inversi√≥n -->
    <div id="investmentModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-gray-800 rounded-lg p-8 max-w-md w-full mx-4 transform transition-all duration-300 scale-95 opacity-0">
            <div class="text-center">
                <div class="text-purple-500 text-6xl mb-4">
                    <i class="fas fa-coins"></i>
                </div>
                <h3 class="text-2xl font-bold mb-4">Invertir en el Proyecto</h3>
                <p class="text-gray-300 mb-6">Ingresa el monto que deseas invertir</p>
                <div class="mb-6">
                    <input type="number" id="investmentAmount" class="w-full bg-gray-700 text-white px-4 py-2 rounded-lg mb-2" placeholder="Monto" min="0.001" step="0.001">
                    <p class="text-sm text-gray-400">Monto m√≠nimo: 0.001</p>
                </div>
                <div class="flex space-x-4 justify-center">
                    <button onclick="closeInvestmentModal()" class="bg-gray-600 hover:bg-gray-700 px-6 py-3 rounded-lg transition-all duration-300">
                        <i class="fas fa-times mr-2"></i>Cancelar
                    </button>
                    <button onclick="confirmInvestment()" class="bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg transition-all duration-300">
                        <i class="fas fa-check mr-2"></i>Confirmar Inversi√≥n
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Pagar por QR -->
    <div id="payQrModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 items-center justify-center">
        <div class="bg-gray-800 rounded-lg p-6 w-full max-w-lg mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">Pagar por QR</h3>
                <button class="text-gray-400 hover:text-white" onclick="closePayQrModal()"><i class="fas fa-times"></i></button>
            </div>
            <div class="space-y-4">
                <div class="text-sm text-gray-400">Escanea un c√≥digo QR con la c√°mara para cargar direcci√≥n y monto.</div>
                <video id="qrVideo" class="w-full rounded bg-black"></video>
                <canvas id="qrCanvas" class="hidden"></canvas>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <input id="qrPayAddress" class="bg-gray-700 text-white px-3 py-2 rounded" placeholder="Direcci√≥n destino 0x...">
                    <input id="qrPayAmount" type="number" step="0.0001" min="0" class="bg-gray-700 text-white px-3 py-2 rounded" placeholder="Monto">
                </div>
                <div class="flex justify-end gap-2">
                    <button class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded" onclick="stopQrScan()">Detener c√°mara</button>
                    <button class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded" onclick="confirmQrPayment()">Pagar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Detalles de Canci√≥n -->
    <div id="songDetailsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-gray-800 rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">Detalles de la Canci√≥n</h3>
                <button class="text-gray-400 hover:text-white text-2xl" onclick="closeSongDetailsModal()"><i class="fas fa-times"></i></button>
            </div>
            <div class="space-y-6">
                <!-- Informaci√≥n principal -->
                <div class="bg-gradient-to-r from-purple-600/20 to-blue-600/20 rounded-lg p-6 border border-purple-500/30">
                    <div class="flex items-start gap-4">
                        <div class="text-6xl">üéµ</div>
                        <div class="flex-1">
                            <h4 class="text-2xl font-bold mb-2" id="modalSongTitle">Luna de Fuego</h4>
                            <p class="text-purple-400 mb-1">
                                <i class="fas fa-user"></i> Artista: <span id="modalSongArtist">Mar√≠a Rodr√≠guez</span>
                            </p>
                            <p class="text-gray-400 text-sm">
                                <i class="fas fa-calendar"></i> Subida: <span id="modalSongDate">15 de Septiembre, 2024</span>
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Estad√≠sticas -->
                <div class="grid grid-cols-3 gap-4">
                    <div class="bg-gray-700/50 rounded-lg p-4 text-center">
                        <div class="text-3xl mb-2">üí∞</div>
                        <div class="text-2xl font-bold text-green-400" id="modalSongTotal">2.45 ETH</div>
                        <div class="text-sm text-gray-400">Total Recaudado</div>
                    </div>
                    <div class="bg-gray-700/50 rounded-lg p-4 text-center">
                        <div class="text-3xl mb-2">‚ù§Ô∏è</div>
                        <div class="text-2xl font-bold text-red-400" id="modalSongDonors">47</div>
                        <div class="text-sm text-gray-400">Donadores</div>
                    </div>
                    <div class="bg-gray-700/50 rounded-lg p-4 text-center">
                        <div class="text-3xl mb-2">üìä</div>
                        <div class="text-2xl font-bold text-blue-400" id="modalSongAvg">0.052 ETH</div>
                        <div class="text-sm text-gray-400">Promedio</div>
                    </div>
                </div>

                <!-- Informaci√≥n t√©cnica -->
                <div class="bg-gray-700/30 rounded-lg p-4">
                    <h5 class="font-bold mb-3 flex items-center gap-2">
                        <i class="fas fa-code"></i> Informaci√≥n T√©cnica
                    </h5>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-400">ID de Canci√≥n:</span>
                            <span class="font-mono text-purple-400" id="modalSongId">1</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">Hash IPFS:</span>
                            <span class="font-mono text-xs break-all text-purple-400" id="modalSongIPFS">QmX8vD3z2Y5...</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">G√©nero:</span>
                            <span class="text-purple-400">Pop Latino</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">Duraci√≥n:</span>
                            <span class="text-purple-400">3:42</span>
                        </div>
                    </div>
                </div>

                <!-- Distribuci√≥n -->
                <div class="bg-blue-600/20 rounded-lg p-4 border border-blue-500/30">
                    <h5 class="font-bold mb-3 flex items-center gap-2">
                        <i class="fas fa-chart-pie"></i> Distribuci√≥n de Donaciones
                    </h5>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-2">
                                <div class="w-4 h-4 bg-green-500 rounded"></div>
                                <span>Artista</span>
                            </div>
                            <span class="font-bold text-green-400">80%</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-2">
                                <div class="w-4 h-4 bg-blue-500 rounded"></div>
                                <span>Sistema</span>
                            </div>
                            <span class="font-bold text-blue-400">12%</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-2">
                                <div class="w-4 h-4 bg-purple-500 rounded"></div>
                                <span>Incentivos</span>
                            </div>
                            <span class="font-bold text-purple-400">8%</span>
                        </div>
                    </div>
                </div>

                <!-- Botones de acci√≥n -->
                <div class="flex gap-3">
                    <button class="btn-morpho btn-morpho-accent flex-1" onclick="donateFromModal()">
                        <i class="fas fa-heart mr-2"></i>Donar Ahora
                    </button>
                    <button class="btn-morpho btn-morpho-ghost" onclick="viewOnExplorer()">
                        <i class="fas fa-external-link-alt mr-2"></i>Ver en Blockchain
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Generar QR de Cobro -->
    <div id="genQrModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 items-center justify-center">
        <div class="bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">Generar QR para Cobro</h3>
                <button class="text-gray-400 hover:text-white" onclick="closeGenQrModal()"><i class="fas fa-times"></i></button>
            </div>
            <div class="space-y-4">
                <div class="grid grid-cols-1 gap-3">
                    <input id="genQrTo" class="bg-gray-700 text-white px-3 py-2 rounded" placeholder="Direcci√≥n a cobrar (tu 0x...)" />
                    <input id="genQrAmount" type="number" step="0.0001" min="0" class="bg-gray-700 text-white px-3 py-2 rounded" placeholder="Monto" />
                </div>
                <div id="genQrContainer" class="flex items-center justify-center bg-gray-900 rounded p-4"></div>
                <div class="flex justify-end">
                    <button class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded" onclick="generatePaymentQr()">Generar QR</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <!-- Script para part√≠culas interactivas estilo Morpho -->
    <script src="morpho-particles.js"></script>
    <!-- QR libs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsqr/1.4.0/jsQR.min.js"></script>
    <!-- Configuraci√≥n de redes y contratos -->
    <script src="networks.js"></script>
    <script src="contracts-arbitrum.js"></script>
    <script src="stylus-contracts.js"></script>
    <script src="app.js"></script>
    <script src="creators-community.js"></script>
    <script>
        // Funci√≥n para mostrar el modal de membres√≠a
        function showMembershipModal() {
            const modal = document.getElementById('membershipModal');
            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.querySelector('.bg-gray-800').classList.remove('scale-95', 'opacity-0');
            }, 10);
        }

        // Funci√≥n para cerrar el modal
        function closeMembershipModal() {
            const modal = document.getElementById('membershipModal');
            modal.querySelector('.bg-gray-800').classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        // Funci√≥n para comprar membres√≠a
        function buyMembership() {
            // Aqu√≠ ir√≠a la l√≥gica para comprar el NFT de membres√≠a
            alert('Redirigiendo a la compra de membres√≠a...');
        }

        // Funci√≥n para mostrar el modal de inversi√≥n
        function showInvestmentModal() {
            const modal = document.getElementById('investmentModal');
            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.querySelector('.bg-gray-800').classList.remove('scale-95', 'opacity-0');
            }, 10);
        }

        // Funci√≥n para cerrar el modal de inversi√≥n
        function closeInvestmentModal() {
            const modal = document.getElementById('investmentModal');
            modal.querySelector('.bg-gray-800').classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        // Funci√≥n para confirmar la inversi√≥n
        async function confirmInvestment() {
            const amount = document.getElementById('investmentAmount').value;
            if (!amount || amount < 0.1) {
                alert('Por favor, ingresa un monto v√°lido (m√≠nimo 0.1 SBY)');
                return;
            }
            
            try {
                await invest(amount);
                closeInvestmentModal();
            } catch (error) {
                alert('Error al procesar la inversi√≥n: ' + error.message);
            }
        }

        // Eventos para los botones
        document.querySelectorAll('.vote-button').forEach(button => {
            button.addEventListener('click', async function(e) {
                e.preventDefault();
                if (!isSubscribed) {
                    showMembershipModal();
                } else {
                    // Aqu√≠ ir√≠a la l√≥gica para votar
                    alert('Funcionalidad de votaci√≥n en desarrollo');
                }
            });
        });

        document.querySelectorAll('.invest-button').forEach(button => {
            button.addEventListener('click', async function(e) {
                e.preventDefault();
                if (!isSubscribed) {
                    showMembershipModal();
                } else {
                    showInvestmentModal();
                }
            });
        });

        // Las funciones y modal de juegos se han eliminado

        // Funciones para el modal de detalles de canci√≥n
        function showSongDetails(id, title, artist, total, donors, ipfs) {
            // Actualizar contenido del modal
            document.getElementById('modalSongTitle').textContent = title;
            document.getElementById('modalSongArtist').textContent = artist;
            document.getElementById('modalSongTotal').textContent = total + ' ETH';
            document.getElementById('modalSongDonors').textContent = donors;
            document.getElementById('modalSongId').textContent = id;
            document.getElementById('modalSongIPFS').textContent = ipfs;
            
            // Calcular promedio
            const avg = (parseFloat(total) / parseInt(donors)).toFixed(3);
            document.getElementById('modalSongAvg').textContent = avg + ' ETH';
            
            // Establecer fecha seg√∫n ID
            const dates = {
                '1': '15 de Septiembre, 2024',
                '2': '22 de Septiembre, 2024',
                '3': '1 de Octubre, 2024',
                '4': '8 de Octubre, 2024'
            };
            document.getElementById('modalSongDate').textContent = dates[id] || 'Fecha desconocida';
            
            // Almacenar ID para donaci√≥n
            window.currentSongId = id;
            
            // Mostrar modal
            const modal = document.getElementById('songDetailsModal');
            modal.classList.remove('hidden');
            modal.querySelector('.bg-gray-800').classList.remove('scale-95', 'opacity-0');
        }

        function closeSongDetailsModal() {
            const modal = document.getElementById('songDetailsModal');
            modal.classList.add('hidden');
            modal.querySelector('.bg-gray-800').classList.add('scale-95', 'opacity-0');
        }

        function donateFromModal() {
            closeSongDetailsModal();
            
            if (window.currentSongId) {
                const amountStr = prompt('Ingresa el monto a donar (en ETH):', '0.01');
                
                if (amountStr && !isNaN(amountStr) && parseFloat(amountStr) > 0) {
                    donateToSong(parseInt(window.currentSongId), parseFloat(amountStr));
                }
            }
        }

        function viewOnExplorer() {
            if (window.currentSongId) {
                const network = getCurrentNetwork();
                const explorerUrl = network.blockExplorerUrls[0];
                // Como no tenemos contractAddress real, solo mostramos un mensaje
                alert('Funci√≥n en desarrollo. Cuando el contrato est√© desplegado, este bot√≥n te llevar√° al explorador de bloques.');
            }
        }

        // Cerrar modal al hacer clic fuera
        document.getElementById('songDetailsModal')?.addEventListener('click', function(e) {
            if (e.target === this) {
                closeSongDetailsModal();
            }
        });

        // ========== FUNCIONES PARA REPRODUCTOR DE CANCIONES ==========
        
        // Estado de los reproductores
        const playersState = {};
        
        // Funci√≥n para alternar play/pause
        function togglePlay(playerId, button) {
            const icon = button.querySelector('i');
            
            if (!playersState[playerId]) {
                playersState[playerId] = {
                    playing: false,
                    currentTime: 0,
                    duration: 0
                };
            }
            
            if (playersState[playerId].playing) {
                // Pausar
                icon.classList.remove('fa-pause');
                icon.classList.add('fa-play');
                playersState[playerId].playing = false;
                if (playersState[playerId].interval) {
                    clearInterval(playersState[playerId].interval);
                }
            } else {
                // Reproducir
                icon.classList.remove('fa-play');
                icon.classList.add('fa-pause');
                icon.classList.remove('ml-0.5');
                playersState[playerId].playing = true;
                
                // Simular progreso
                startProgress(playerId);
            }
        }
        
        // Funci√≥n para simular progreso de reproducci√≥n
        function startProgress(playerId) {
            const state = playersState[playerId];
            
            playersState[playerId].interval = setInterval(() => {
                if (!state.playing) {
                    clearInterval(playersState[playerId].interval);
                    return;
                }
                
                state.currentTime += 1;
                updateProgressBar(playerId);
                
                // Si alcanza el final, resetear
                if (state.currentTime >= state.duration) {
                    clearInterval(playersState[playerId].interval);
                    state.playing = false;
                    state.currentTime = 0;
                    
                    // Resetear bot√≥n
                    const container = document.querySelector(`[onclick*="${playerId}"]`);
                    if (container) {
                        const icon = container.querySelector('i');
                        if (icon) {
                            icon.classList.remove('fa-pause');
                            icon.classList.add('fa-play', 'ml-0.5');
                        }
                    }
                    updateProgressBar(playerId);
                }
            }, 1000);
        }
        
        // Actualizar barra de progreso
        function updateProgressBar(playerId) {
            const state = playersState[playerId];
            const percentage = state.duration > 0 ? (state.currentTime / state.duration) * 100 : 0;
            
            // Buscar el reproductor por su contexto
            const allProgressBars = document.querySelectorAll('.player-progress');
            const allHandles = document.querySelectorAll('.player-handle');
            const allTimes = document.querySelectorAll('.font-mono');
            
            // Actualizar la barra correspondiente (usando posici√≥n en la lista)
            const playerIndex = parseInt(playerId.replace('player', '')) - 1;
            if (allProgressBars[playerIndex] && allHandles[playerIndex]) {
                allProgressBars[playerIndex].style.width = percentage + '%';
                allHandles[playerIndex].style.left = percentage + '%';
                
                // Actualizar tiempo
                const minutes = Math.floor(state.currentTime / 60);
                const seconds = state.currentTime % 60;
                const timeStr = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                // Buscar el span de tiempo correcto
                const timeElements = document.querySelectorAll('.font-mono');
                if (timeElements[playerIndex * 2]) { // Skip otros elementos con font-mono
                    timeElements[playerIndex * 2].textContent = timeStr;
                }
            }
        }
        
        // Funci√≥n para seek (cambiar posici√≥n)
        function seekSong(element, playerId, duration) {
            const state = playersState[playerId];
            if (!state) return;
            
            const rect = element.getBoundingClientRect();
            const clickX = event.clientX - rect.left;
            const percentage = (clickX / rect.width) * 100;
            const clampedPercentage = Math.max(0, Math.min(100, percentage));
            
            state.currentTime = (clampedPercentage / 100) * duration;
            updateProgressBar(playerId);
        }
        
        // Funci√≥n para ajustar volumen
        function adjustVolume(playerId, delta) {
            const state = playersState[playerId];
            if (!state) {
                playersState[playerId] = { volume: 0.7 };
            } else if (!state.volume) {
                state.volume = 0.7;
            }
            
            state.volume = Math.max(0, Math.min(1, state.volume + delta));
            
            // Actualizar barra de volumen visual
            const allVolumeBars = document.querySelectorAll('.volume-bar');
            const playerIndex = parseInt(playerId.replace('player', '')) - 1;
            if (allVolumeBars[playerIndex]) {
                allVolumeBars[playerIndex].style.width = (state.volume * 100) + '%';
            }
        }
        
        // Funci√≥n para establecer volumen desde click
        function setVolume(element, playerId) {
            const state = playersState[playerId];
            if (!state) {
                playersState[playerId] = {};
            }
            
            const rect = element.getBoundingClientRect();
            const clickX = event.clientX - rect.left;
            const percentage = Math.max(0, Math.min(1, clickX / rect.width));
            
            state.volume = percentage;
            
            const allVolumeBars = document.querySelectorAll('.volume-bar');
            const playerIndex = parseInt(playerId.replace('player', '')) - 1;
            if (allVolumeBars[playerIndex]) {
                allVolumeBars[playerIndex].style.width = (percentage * 100) + '%';
            }
        }
        
        // Inicializar duraciones de las canciones
        document.addEventListener('DOMContentLoaded', function() {
            // Reproductores de Explorar Canciones
            playersState['player1'] = { currentTime: 0, duration: 222 }; // 3:42
            playersState['player2'] = { currentTime: 0, duration: 198 }; // 3:18
            playersState['player3'] = { currentTime: 0, duration: 245 }; // 4:05
            playersState['player4'] = { currentTime: 0, duration: 174 }; // 2:54
            
            // Reproductores de Mis Donaciones
            playersState['donate-player1'] = { currentTime: 0, duration: 222 }; // 3:42
            playersState['donate-player2'] = { currentTime: 0, duration: 245 }; // 4:05
            playersState['donate-player3'] = { currentTime: 0, duration: 198 }; // 3:18
        });
    </script>
</body>
</html> 

